# Промпт для передачи работ другому агенту

## Контекст проекта

Ты продолжаешь разработку проекта **xyliganimbot** — Telegram-бота для поиска ответов в базе знаний (документ Google Docs).

**Цель проекта**: Поиск ответов в базе знаний через Telegram-бота.

**Рабочая папка**: `c:\VirtualBox\shared\xyliganimbot\`

## Ключевые документы

Обязательно изучи перед началом работы:

1. **`docs/idea.md`** — описание идеи проекта, функциональные и нефункциональные требования
2. **`docs/vision.md`** — техническое видение проекта (технологии, архитектура, модель данных, сценарии работы)
3. **`docs/tasklist_v0.1.md`** — план разработки с итерациями и задачами (отмечай выполненные задачи чекбоксами)
4. **`docs/BACKLOG.md`** — бэклог задач с приоритетами
5. **`docs/TESTING.md`** — план тестирования и критерии готовности

## Принципы разработки

**КРИТИЧЕСКИ ВАЖНО** — следуй принципам KISS (Keep It Simple, Stupid):

- **KISS** — максимально простое решение без лишних абстракций
- **MVP-first** — реализуется только необходимый минимум
- **Файловое хранилище** — без БД на первом этапе, все данные в файлах (Markdown, JSON)
- **Допустима потеря состояния** — при перезапуске состояние не сохраняется, бот работает stateless
- **Один чат, ограниченное число пользователей**
- **Без преждевременной оптимизации**
- **LLM — опционально** — не является частью MVP
- **Ручное тестирование** — основной метод для MVP, автоматические тесты на первом этапе не требуются

## Текущее состояние проекта

### Структура проекта

```
xyliganimbot/
├── src/              # Исходный код бота
│   ├── __init__.py
│   └── handlers/     # Обработчики команд и сообщений
│       └── __init__.py
├── data/             # Кэш документа (опционально)
│   └── .gitkeep
├── logs/             # Логи приложения
│   └── .gitkeep
├── docs/             # Документация
├── k8s/              # Kubernetes манифесты
├── tests/            # Тесты (на будущее)
├── requirements.txt  # Зависимости Python
├── .gitignore
└── .env.example
```

### Что уже сделано

- Создана базовая структура папок
- Создан `requirements.txt` с зависимостями
- Создан `.gitignore`
- Создан `.env.example`
- Созданы `__init__.py` файлы для модулей
- Создана документация (idea.md, vision.md, tasklist_v0.1.md, BACKLOG.md, TESTING.md)

### Что нужно сделать

Следуй плану в **`docs/tasklist_v0.1.md`**. Начни с **Итерации 1** и выполняй задачи последовательно.

## Инструкции по работе

### 1. Работа с планом задач

- Открывай `docs/tasklist_v0.1.md`
- Отмечай выполненные задачи чекбоксами: `- [ ]` → `- [x]`
- Работай последовательно по итерациям
- После завершения итерации переходи к следующей только после подтверждения

### 2. Структура кода

Следуй структуре из `vision.md`:
- `src/bot.py` — основной модуль бота
- `src/config.py` — работа с конфигурацией
- `src/google_docs.py` — работа с Google Docs
- `src/search.py` — логика поиска
- `src/logging.py` — логирование
- `src/audit.py` — аудит
- `src/handlers/` — обработчики команд и сообщений

### 3. Технологии

- **Python 3.x** с минимальными зависимостями
- **python-telegram-bot** (или aiogram) для Telegram API
- **google-api-python-client** для работы с Google Docs API
- **pyyaml** для конфигурации
- **python-dotenv** для переменных окружения

### 4. Конфигурация

- Основная конфигурация в `config.yaml` (создай `config.yaml.example`)
- Секреты через переменные окружения (`.env`)
- Белые списки пользователей/чатов в конфигурации

### 5. Логирование

- Стандартный Python `logging`
- Файл `logs/app.log` для продакшена
- Файл `logs/audit.log` для журнала действий
- Ротация логов по размеру файла
- Тексты пользовательских сообщений отключены по умолчанию

### 6. Обработка ошибок

- Простые try/except блоки
- Понятные сообщения пользователю (без технических деталей)
- Логирование всех ошибок
- Fallback на кэш при недоступности Google Docs

## Важные замечания

1. **Не оверинжинирь** — простое решение важнее идеального
2. **Работай итеративно** — одна итерация = один день работы
3. **Тестируй вручную** — автоматические тесты не требуются на первом этапе
4. **Документируй код** — комментарии по месту, README с инструкциями
5. **Следуй vision.md** — все технические решения должны соответствовать техническому видению

## Критерии готовности задачи

Задача считается выполненной, если:
- Код написан и работает
- Соответствует принципам KISS
- Соответствует структуре из vision.md
- Логирование работает
- Ошибки обрабатываются
- Задача отмечена в tasklist_v0.1.md

## Вопросы и уточнения

Если что-то непонятно:
1. Изучи `docs/vision.md` — там описаны все технические решения
2. Изучи `docs/idea.md` — там описаны требования
3. Следуй принципам KISS — выбирай самое простое решение

## Начало работы

1. Открой `docs/tasklist_v0.1.md`
2. Найди первую невыполненную задачу в Итерации 1
3. Начни выполнение
4. Отмечай прогресс чекбоксами

**Удачи!**
