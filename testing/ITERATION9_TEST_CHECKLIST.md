# Чек-лист ручного тестирования итерации 9 (админские команды)

**Цель**: Проверить работу команд `/admin`, `/admin load_model`, `/admin vectorize`, проверку прав администратора и перезагрузку контекста поиска после векторизации.

**Предусловия**:
- В `config.yaml` в списке `admins` указан telegram_id тестового аккаунта (администратора).
- В белых списках `users`/`chats` есть тестовый пользователь и чат (или списки пусты для теста).
- Для проверки `/admin vectorize`: есть `data/knowledge.md` (или `data/knowledge.html`) и модель в `models/intfloat/multilingual-e5-small/` (или будет проверено сообщение об ошибке).

**Запуск бота**: из корня проекта: `python -m src.bot`

---

## Чек-лист

| № | Действие | Ожидаемый результат | Результат (пройден/не пройден) | Примечания |
|---|----------|---------------------|--------------------------------|------------|
| 1 | Запустить бота с указанным config | Бот стартует без ошибок, в логах есть информация о загрузке whitelists и admins |PASS|Whitelists loaded: 1 users, 2 chats, 1 admins|
| 2 | От **администратора**: отправить `/admin` | Ответ: «Команда /admin требует подкоманду» и список: load_model, vectorize |PASS| |
| 3 | От администратора: `/admin unknown` | Ответ: «Неизвестная подкоманда «unknown»» и список доступных команд |PASS| |
| 4 | От администратора: `/admin load_model` | «Начинаю загрузку модели…», затем «Модель загружена успешно.» или сообщение об ошибке (если модель уже есть / нет сети) |PASS| |
| 5 | От администратора: `/admin vectorize` (при наличии data/knowledge.md и модели) | «Векторизация запущена…», затем «Векторизация завершена. Контекст поиска обновлён.» или текст ошибки |PASS| |
| 6 | После успешной векторизации отправить обычный поисковый запрос (например: «как настроить vpn») | Поиск возвращает результаты — контекст обновился без перезапуска бота |PASS| |
| 7 | От **пользователя не из списка admins** (другой аккаунт): `/admin` или `/admin load_model` | Ответ: «Команда доступна только администраторам.» |FAIL|Никакого ответа|
| 8 | От пользователя не из whitelist (если списки настроены): `/admin` | Доступ запрещён (сообщение не приходит или отказ по check_access) |FAIL|В логах Access denied|

---

**Дата прогона**: _указать при заполнении_  
**Окружение**: _ОС, версия Python, наличие модели/данных_  
**Итог**: _X из 8 пройдено_

Результаты подробно фиксировать в `ITERATION9_TEST_RESULTS.md`.
